<?php /* Template Name: Checklists */ ?><?php get_header(); ?><?php $table_name = $wpdb->prefix . "custom_checklist"; $checklists = $wpdb->get_results("SELECT * FROM {$table_name} ORDER BY checklist_category_priority ASC");$table_name_checklist_category = $wpdb->prefix . "custom_checklist_category"; $table_checklist_template = $wpdb->prefix . "custom_checklist_template"; $template_checklists = $wpdb->get_results("SELECT * FROM {$table_checklist_template}");?><div class="checklist">		<a id="create_checklists" class="button_1 add_checklists" href="/add-checklists/">+ Add Checklists</a>	</div><div class="display_main manage_checklist_template_category_items">	<div class="display_section template">		<h2 class="display_title">Templates</h2>		<?php						foreach($template_checklists as $template_checklist){								$checklist_template_id = $template_checklist->ID;				$checklist_template = $template_checklist->checklist_template;				$checklist_template_items = $template_checklist->checklist_items;				$title_class = preg_replace("/\s+/", " ", $checklist_template);				$title_class = str_replace(" ", "_", $title_class);				$title_class = preg_replace("/[^A-Za-z0-9_]/","",$title_class);				$title_class = strtolower($title_class);				?>									<div id="template_display_<?php echo $checklist_template_id; ?>" class="display_list">					<div class="template_display">						<div id="checklist_template_edit_<?php echo $checklist_template_id; ?>" class="checklist_template_edit button_2 display_button">Edit</div>						<div id="checklist_template_delete_<?php echo $checklist_template_id; ?>" class="checklist_template_delete button_2 display_button">Delete</div>											<div style="display: none;" id="checklist_template_loader_<?php echo $checklist_template_id; ?>" class="checklist_template_loader loader"></div>					</div>					<h3 class="display_subtitle <?php echo $title_class; ?>"><?php echo $checklist_template; ?></h3>																</div>			<?php					}					?>	</div>	<div class="display_section categories_items">		<h2 class="display_title">Categories</h2>		<ul id="category_sort_priority">		<?php						foreach($checklists as $checklist){					$checklist_id = $checklist->ID;					$checklist_category = $checklist->checklist_category;										$toggle_class = preg_replace("/\s+/", " ", $checklist_category);					$toggle_class = str_replace(" ", "_", $toggle_class);					$toggle_class = preg_replace("/[^A-Za-z0-9_]/","",$toggle_class);					$toggle_class = strtolower($toggle_class);								$unserialize = unserialize($checklist->checklist);										$checklist_categories = $wpdb->get_row("SELECT * FROM {$table_name_checklist_category} WHERE check_list_category = '$checklist_category'");					$checklist_category_id = $checklist_categories->ID;			?>	 				<li id="catergory_id_<?php echo $checklist_category_id; ?>" class="ui-state-default li_category_container">					<div class="custom_accordian">						<div class="category_name_container">							<div class="toggle_display">								<div id="checklist_category_edit_<?php echo $checklist_category_id; ?>" class="checklist_category_edit button_2 display_button">Edit</div>								<div id="checklist_category_delete_<?php echo $checklist_category_id; ?>" class="checklist_category_delete button_2 display_button">Delete</div>								<div style="display: none;" id="checklist_category_loader_<?php echo $checklist_category_id; ?>" class="checklist_category_loader loader"></div>							</div>							<div class="display_list <?php echo $toggle_class; ?>">									<h3 class="display_subtitle checklist_category_name"><?php echo $checklist_category; ?></h3>								<h5 id="custom_toggle_<?php echo $checklist_category_id; ?>" class="custom_toggle">									<span class="arrow"></span>									</h5>							</div>						</div>						<div id="custom_toggle_content_<?php echo $checklist_category_id; ?>" class="custom_toggle_content" style="display: none;">							<?php								$counter = 1;								$item_count = count($unserialize);															foreach($unserialize as $key => $checklist_list){									$check_list_name_description_explode = explode('<__>', stripslashes($checklist_list));																		$check_list_name = $check_list_name_description_explode[0];									$check_list_description = $check_list_name_description_explode[1];									$checklist_description_display = find_url($check_list_description);																	?>														<div id="checklist_display_<?php echo $checklist_category_id .'_'. $key; ?>" class="display_list checklist_display_list">									<div id="checklist_edit_<?php echo $checklist_category_id .'_'. $key; ?>" class="checklist_edit button_2 display_button">Edit</div>									<h3 id="checklist_<?php echo $checklist_category_id .'_'. $key; ?>" class="display_subtitle"><?php echo $check_list_name; ?></h3>									<div id="checklist_delete_<?php echo $checklist_category_id .'_'. $key; ?>" class="checklist_delete button_2 display_button float_right">Delete</div>									<div style="display:none;" id="checklist_<?php echo $checklist_category_id .'_'. $key; ?>" class="checklist_loader loader"></div>									<div style="display:none;" id="checklist_description_<?php echo $checklist_category_id ."_". $key; ?>" class="checklist_description_display"><?php echo $checklist_description_display; ?></div>								</div>								<div class="display_separator <?php echo ($counter == $item_count) ? "last_accordian_content" : "";   ?>"></div>													<?php $counter++;	} ?>						</div>					</div>				</li>		<?php					}					?>		</ul>	</div></div><div style="display:none;" id="dialog_form_edit_checklist_template" title="Edit Template">	<form id="edit_checklist_template_form">		<p class="label">Checklist Template</p>		<input type="text" name="checklist_template_name" class="checklist_template_name" />		<input type="hidden" name="checklist_template_id" class="checklist_template_id" />		<input type="hidden" name="checklist_current_template_name" class="checklist_current_template_name" />		<div class="button_1 update_checklist_template">Update</div>		<div style="display: none;" class="loader edit_checklist_template_loader"></div>	</form></div><div style="display:none;" id="dialog_form_delete_checklist_template" title="Delete Template">	<form id="delete_checklist_template_form">		<p class="label">Delete Template:<span class="checklist_template_name"></span></p>		<p class="confimation">Are you sure you want to continue?</p>		<input type="hidden" name="checklist_template_name" class="checklist_template_name" />		<input type="hidden" name="checklist_template_id" class="checklist_template_id" />		<input type="hidden" name="checklist_current_template_name" class="checklist_current_template_name" />		<div class="button_1 delete_checklist_template">Delete</div>		<div style="display: none;" class="loader delete_checklist_template_loader"></div>	</form></div><div style="display:none;" id="dialog_form_edit_checklist_category" title="Edit Checklist Category">	<form id="edit_checklist_category_form">		<p class="label">Checklist Category</p>		<input type="text" name="checklist_category_name" class="checklist_category_name" />		<input type="hidden" name="checklist_category_id" class="checklist_category_id" />		<input type="hidden" name="checklist_current_category_name" class="checklist_current_category_name" />		<div class="button_1 update_checklist_category">Update</div>		<div style="display: none;" class="loader edit_checklist_category_loader"></div>	</form></div><div style="display:none;" id="dialog_form_delete_checklist_category" title="Delete Checklist Category">	<form id="delete_checklist_category_form">		<p class="label">Deleting Category <span class="checklist_category_name"></span> will also delete all checkboxes.</p>				<p class="confimation">Are you sure you want to continue?</p>		<input type="hidden" name="checklist_category_name" class="checklist_category_name" />		<input type="hidden" name="checklist_category_id" class="checklist_category_id" />		<div class="button_1 delete_checklist_category">Delete</div>		<div style="display:none;" class="loader delete_checklist_category_loader"></div>	</form></div><div style="display:none;" id="dialog_form_edit_checklist" title="Edit Checklist"></div><div style="display:none;" id="dialog_form_delete_checklist" title="Delete Checklist"></div><?php get_footer(); ?>